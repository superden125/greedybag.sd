{"ast":null,"code":"var _jsxFileName = \"/home/sd/HK1-2020-2021/NLCS/balo/demo2/src/components/Items/TableItem.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Input, Table, Form as Forms, FormGroup, Row, Col } from \"reactstrap\";\nimport FlipMove from \"react-flip-move\";\nimport { greedy } from \"../../greedy\";\nimport InputFile from \"./InputFile\";\nimport TypeBalo from \"./TypeBalo\";\nimport ButtonControl from \"./ButtonControl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction TableItem(props) {\n  const [items, setItems] = useState([]);\n  const [weight, setWeight] = useState({\n    value: \"\",\n    touched: false,\n    errors: \"\"\n  });\n  const [errors, setErrors] = useState([]);\n  const [type, setType] = useState({\n    value: 0,\n    errors: \"\"\n  });\n  const [isGreedy, setIsGreedy] = useState(false);\n  const [fileName, setFileName] = useState(\"\");\n  const [file, setFile] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isHaveFile, setIsHaveFile] = useState(false);\n  const initItem = {\n    name: \"\",\n    value: \"\",\n    weight: \"\",\n    stock: \"\",\n    qty: \"\" // time: \"\",\n\n  };\n  useEffect(() => {\n    console.log(errors);\n  }, [errors]);\n\n  const addItem = () => {\n    isGreedy && setIsGreedy(false);\n    setItems([...items, initItem]);\n    setErrors([...errors, initItem]);\n  };\n\n  const handleWeightChange = e => {\n    setIsGreedy(false);\n    setWeight({ ...weight,\n      value: e.target.value,\n      errors: \"\"\n    });\n  };\n\n  const handleChange = (e, index) => {\n    isGreedy && setIsGreedy(false);\n    let newArr = items.map((item, i) => {\n      if (index === i) {\n        return { ...item,\n          [e.target.name]: e.target.value\n        };\n      } else {\n        return item;\n      }\n    });\n    setItems(newArr);\n    let newErr = errors.map((error, i) => {\n      if (index === i) {\n        return { ...error,\n          [e.target.name]: \"\"\n        };\n      } else {\n        return error;\n      }\n    });\n    setErrors(newErr);\n  };\n\n  const handleBlur = index => e => {\n    // if (!e.target.value) {\n    //   let newErr = errors.map((error, i) => {\n    //     if (index === i) {\n    //       return { ...error, [e.target.name]: \"Required\" };\n    //     } else {\n    //       return error;\n    //     }\n    //   });\n    //   setErrors(newErr);\n    // } else {\n    //   let newErr = errors.map((error, i) => {\n    //     if (\n    //       index === i &&\n    //       e.target.name !== \"name\" &&\n    //       //e.target.value % 1 !== 0\n    //       isNaN(e.target.value)\n    //     ) {\n    //       return { ...error, [e.target.name]: \"Value must be number\" };\n    //     } //else {\n    //     if (\n    //       index === i &&\n    //       e.target.name !== \"name\" &&\n    //       parseInt(e.target.value) <= 0\n    //     ) {\n    //       return { ...error, [e.target.name]: \"Value must > 0\" };\n    //     } //else {\n    //     if (\n    //       index === i &&\n    //       e.target.name === \"stock\" &&\n    //       !Number.isInteger(parseFloat(e.target.value))\n    //     ) {\n    //       //error\n    //       return { ...error, [e.target.name]: \"Stock must be Integer\" };\n    //     }\n    //     return error;\n    //     //}\n    //     //}\n    //   });\n    //   setErrors(newErr);\n    // }\n    validItems(index, e.target.name, e.target.value);\n  };\n\n  const handleWeightBlur = e => {\n    setWeight({ ...weight,\n      touched: true\n    }); // if (!e.target.value) {\n    //   setWeight({ ...weight, errors: \"Required\" });\n    // } else {\n    //   if (isNaN(e.target.value))\n    //     setWeight({ ...weight, errors: \"Value must be number\" });\n    //   else {\n    //     if (parseInt(e.target.value) <= 0)\n    //       setWeight({ ...weight, errors: \"Value must be > 0\" });\n    //   }\n    // }\n\n    validWeight(e.target.value);\n  };\n\n  const validItems = (index, name, value) => {\n    console.log(\"call\");\n    var valid = true;\n\n    if (!value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          valid = false;\n          return { ...error,\n            [name]: \"Required\"\n          };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    } else {\n      let newErr = errors.map((error, i) => {\n        if (index === i && name !== \"name\" && isNaN(value)) {\n          valid = false;\n          return { ...error,\n            [name]: \"Value must be number\"\n          };\n        }\n\n        if (index === i && name !== \"name\" && parseInt(value) <= 0) {\n          valid = false;\n          return { ...error,\n            [name]: \"Value must > 0\"\n          };\n        }\n\n        if (index === i && name === \"stock\" && !Number.isInteger(parseFloat(value))) {\n          valid = false;\n          return { ...error,\n            [name]: \"Stock must be Integer\"\n          };\n        }\n\n        return error;\n      });\n      setErrors(newErr);\n      return valid;\n    }\n  };\n\n  const validName = (index, value) => {\n    var valid = true;\n\n    if (!value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          valid = false;\n          return { ...error,\n            [\"name\"]: \"Required\"\n          };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    }\n\n    return valid;\n  };\n\n  const validWeight = value => {\n    if (!value) {\n      setWeight({ ...weight,\n        errors: \"Required\"\n      });\n      return false;\n    }\n\n    if (isNaN(value)) {\n      setWeight({ ...weight,\n        errors: \"Value must be number\"\n      });\n      return false;\n    }\n\n    if (parseInt(value) <= 0) {\n      setWeight({ ...weight,\n        errors: \"Value must be > 0\"\n      });\n      return false;\n    }\n\n    return true;\n  };\n\n  const checkValue = () => {\n    //false: no error\n    //true: have error\n    let check = false;\n\n    if (!validWeight(weight.value)) {\n      check = true;\n    }\n\n    for (var i = 0; i < items.length; i++) {\n      //let error = { ...newErrors[i] };\n      if (!validItems(i, \"name\", items[i].name)) {\n        //error.name = \"Required\";\n        check = true;\n      }\n\n      if (items[i].value === \"\") {\n        //error.value = \"Required\";\n        check = true;\n      }\n\n      if (items[i].weight === \"\") {\n        //error.weight = \"Required\";\n        check = true;\n      }\n\n      if (items[i].stock === \"\" && type.value === \"2\") {\n        //error.stock = \"Required\";\n        check = true;\n      }\n\n      if (type.value !== \"2\") {//error.stock = \"\";\n      } //newErrors[i] = error;\n\n    } // setErrors(newErrors);\n\n\n    return check;\n  };\n\n  const validCheckItems = () => {\n    items.forEach((item, index) => {\n      validItems(index, \"name\", item.name);\n      validItems(index, \"value\", item.value);\n    });\n  };\n\n  const onSubmit = () => {\n    // if (!checkType() && !checkValue()) {\n    //   greedy(items, parseInt(type.value), parseFloat(weight.value));\n    //   setIsGreedy(true);\n    // }\n    validCheckItems();\n  };\n\n  const clearItem = () => {\n    setItems([]);\n    setErrors([]);\n    setWeight({\n      value: \"\",\n      touched: false,\n      errors: \"\"\n    });\n    setType({ ...type,\n      value: 0\n    });\n    setIsGreedy(false);\n    setFileName();\n    setFile(\"\");\n    setIsHaveFile(false);\n  };\n\n  const setItemsFile = inputItems => {\n    setItems(inputItems);\n    setErrors([]);\n    inputItems.forEach(item => {\n      setErrors(prev => [...prev, initItem]); //setItems((prev) => [...prev, item]);\n    });\n  };\n\n  const setInputFile = (inputWeight, inputItems) => {\n    //clearItem();\n    setFile(\"\");\n    setIsGreedy(false);\n    inputWeight > 0 && setWeight({ ...weight,\n      value: inputWeight,\n      errors: \"\"\n    });\n    setItemsFile(inputItems);\n    setIsHaveFile(true);\n  };\n\n  const onTypeChange = e => {\n    isGreedy && setIsGreedy(false);\n    setType({\n      value: e.target.value,\n      errors: \"\"\n    });\n  };\n\n  const checkType = () => {\n    //false no errors\n    //true have errors\n    if (type.value === 0) {\n      setType({ ...type,\n        errors: \"Required\"\n      });\n      return true;\n    }\n\n    return false;\n  };\n\n  const handleDeleteItem = index => {\n    const newItems = [...items];\n    newItems.splice(index, 1);\n    setItems(newItems);\n    const newErrors = [...errors];\n    newErrors.splice(index, 1);\n    setErrors(newErrors);\n  };\n\n  const totalValue = items => {\n    return items.reduce((totalWeight, item) => totalWeight + item.qty * item.value, 0);\n  };\n\n  const totalWeight = items => {\n    return items.reduce((totalWeight, item) => totalWeight + item.qty * item.weight, 0);\n  };\n\n  const notVisibleState = {\n    transform: \"translateX(-100%)\",\n    opacity: 0.1\n  };\n  const leaveOut = {\n    transform: \"translateX(100%)\",\n    opacity: 0.1\n  }; // const leaveState = {\n  //   opacity: 0,\n  // };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Forms, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    form: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    className: \"offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 17\n    }\n  }, \"Tr\\u1ECDng L\\u01B0\\u1EE3ng\"), /*#__PURE__*/React.createElement(Input, {\n    style: {\n      width: \"100px\"\n    },\n    type: \"number\",\n    name: \"weight\",\n    id: \"weight\",\n    value: weight.value,\n    onChange: handleWeightChange,\n    onBlur: handleWeightBlur,\n    className: weight.errors && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 17\n    }\n  }), weight.errors && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 19\n    }\n  }, weight.errors)))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TypeBalo, {\n    onTypeChange: onTypeChange,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputFile, {\n    setFileName: setFileName,\n    fileNames: fileName,\n    items: items,\n    isGreedy: isGreedy,\n    setIsLoading: setIsLoading,\n    setInputFile: setInputFile,\n    file: file,\n    setFile: setFile,\n    inputWeight: weight.value,\n    type: type.value,\n    totalValue: totalValue,\n    totalWeight: totalWeight,\n    disabled: isHaveFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(ButtonControl, {\n    clearItem: clearItem,\n    addItem: addItem,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center sd-fade-up-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }\n  }, \"Danh S\\xE1ch \\u0110\\u1ED3 V\\u1EADt\"), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    className: \"table-hover sd-fade-up-down sd-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"500px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 15\n    }\n  }, \"T\\xEAn \\u0111\\u1ED3 v\\u1EADt\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 15\n    }\n  }, \"Gi\\xE1 tr\\u1ECB\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }\n  }, \"Tr\\u1ECDng l\\u01B0\\u1EE3ng\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 15\n    }\n  }, \"S\\u1ED1 l\\u01B0\\u1EE3ng hi\\u1EC7n c\\xF3\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 15\n    }\n  }, \"S\\u1ED1 l\\u01B0\\u1EE3ng l\\u1EA5y\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(FlipMove, {\n    typeName: \"tbody\",\n    enterAnimation: {\n      from: notVisibleState,\n      to: {}\n    },\n    leaveAnimation: {\n      from: {},\n      to: leaveOut\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 11\n    }\n  }, items.length > 0 && !isLoading && items.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    id: \"name\",\n    value: item.name ? item.name : null,\n    name: \"name\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index] && errors[index].name && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 21\n    }\n  }), errors[index].name && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 23\n    }\n  }, errors[index].name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.value,\n    name: \"value\" // type=\"number\"\n    ,\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].value && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 21\n    }\n  }), errors[index].value && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 23\n    }\n  }, errors[index].value)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.weight,\n    name: \"weight\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].weight && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 21\n    }\n  }), errors[index].weight && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 23\n    }\n  }, errors[index].weight)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.stock,\n    name: \"stock\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].stock && \"is-invalid\",\n    disabled: type.value !== \"2\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 21\n    }\n  }), errors[index].stock && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 23\n    }\n  }, errors[index].stock)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    disabled: true,\n    value: item.qty,\n    name: \"qty\",\n    onChange: e => handleChange(e, index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"trash-alt\",\n    className: \"icon-trash\",\n    onClick: () => handleDeleteItem(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 21\n    }\n  })))), isGreedy && /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"sd-total-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"sd-total-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 17\n    }\n  }, \"T\\u1ED5ng c\\u1ED9ng:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 17\n    }\n  }, totalValue(items)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 17\n    }\n  }, totalWeight(items)))))));\n}\n\nTableItem.propTypes = {};\nexport default TableItem;","map":{"version":3,"sources":["/home/sd/HK1-2020-2021/NLCS/balo/demo2/src/components/Items/TableItem.js"],"names":["React","useState","useEffect","Input","Table","Form","Forms","FormGroup","Row","Col","FlipMove","greedy","InputFile","TypeBalo","ButtonControl","FontAwesomeIcon","TableItem","props","items","setItems","weight","setWeight","value","touched","errors","setErrors","type","setType","isGreedy","setIsGreedy","fileName","setFileName","file","setFile","isLoading","setIsLoading","isHaveFile","setIsHaveFile","initItem","name","stock","qty","console","log","addItem","handleWeightChange","e","target","handleChange","index","newArr","map","item","i","newErr","error","handleBlur","validItems","handleWeightBlur","validWeight","valid","isNaN","parseInt","Number","isInteger","parseFloat","validName","checkValue","check","length","validCheckItems","forEach","onSubmit","clearItem","setItemsFile","inputItems","prev","setInputFile","inputWeight","onTypeChange","checkType","handleDeleteItem","newItems","splice","newErrors","totalValue","reduce","totalWeight","notVisibleState","transform","opacity","leaveOut","width","from","to","propTypes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { Input, Table, Form as Forms, FormGroup, Row, Col } from \"reactstrap\";\nimport FlipMove from \"react-flip-move\";\n\nimport { greedy } from \"../../greedy\";\nimport InputFile from \"./InputFile\";\nimport TypeBalo from \"./TypeBalo\";\nimport ButtonControl from \"./ButtonControl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction TableItem(props) {\n  const [items, setItems] = useState([]);\n  const [weight, setWeight] = useState({\n    value: \"\",\n    touched: false,\n    errors: \"\",\n  });\n  const [errors, setErrors] = useState([]);\n  const [type, setType] = useState({\n    value: 0,\n    errors: \"\",\n  });\n\n  const [isGreedy, setIsGreedy] = useState(false);\n\n  const [fileName, setFileName] = useState(\"\");\n  const [file, setFile] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isHaveFile, setIsHaveFile] = useState(false);\n\n  const initItem = {\n    name: \"\",\n    value: \"\",\n    weight: \"\",\n    stock: \"\",\n    qty: \"\",\n    // time: \"\",\n  };\n\n  useEffect(() => {\n    console.log(errors);\n  }, [errors]);\n\n  const addItem = () => {\n    isGreedy && setIsGreedy(false);\n    setItems([...items, initItem]);\n    setErrors([...errors, initItem]);\n  };\n\n  const handleWeightChange = (e) => {\n    setIsGreedy(false);\n    setWeight({ ...weight, value: e.target.value, errors: \"\" });\n  };\n\n  const handleChange = (e, index) => {\n    isGreedy && setIsGreedy(false);\n    let newArr = items.map((item, i) => {\n      if (index === i) {\n        return { ...item, [e.target.name]: e.target.value };\n      } else {\n        return item;\n      }\n    });\n    setItems(newArr);\n\n    let newErr = errors.map((error, i) => {\n      if (index === i) {\n        return { ...error, [e.target.name]: \"\" };\n      } else {\n        return error;\n      }\n    });\n    setErrors(newErr);\n  };\n\n  const handleBlur = (index) => (e) => {\n    // if (!e.target.value) {\n    //   let newErr = errors.map((error, i) => {\n    //     if (index === i) {\n    //       return { ...error, [e.target.name]: \"Required\" };\n    //     } else {\n    //       return error;\n    //     }\n    //   });\n    //   setErrors(newErr);\n    // } else {\n    //   let newErr = errors.map((error, i) => {\n    //     if (\n    //       index === i &&\n    //       e.target.name !== \"name\" &&\n    //       //e.target.value % 1 !== 0\n    //       isNaN(e.target.value)\n    //     ) {\n    //       return { ...error, [e.target.name]: \"Value must be number\" };\n    //     } //else {\n    //     if (\n    //       index === i &&\n    //       e.target.name !== \"name\" &&\n    //       parseInt(e.target.value) <= 0\n    //     ) {\n    //       return { ...error, [e.target.name]: \"Value must > 0\" };\n    //     } //else {\n\n    //     if (\n    //       index === i &&\n    //       e.target.name === \"stock\" &&\n    //       !Number.isInteger(parseFloat(e.target.value))\n    //     ) {\n    //       //error\n    //       return { ...error, [e.target.name]: \"Stock must be Integer\" };\n    //     }\n\n    //     return error;\n    //     //}\n    //     //}\n    //   });\n\n    //   setErrors(newErr);\n    // }\n    validItems(index, e.target.name, e.target.value);\n  };\n  const handleWeightBlur = (e) => {\n    setWeight({ ...weight, touched: true });\n    // if (!e.target.value) {\n    //   setWeight({ ...weight, errors: \"Required\" });\n    // } else {\n    //   if (isNaN(e.target.value))\n    //     setWeight({ ...weight, errors: \"Value must be number\" });\n    //   else {\n    //     if (parseInt(e.target.value) <= 0)\n    //       setWeight({ ...weight, errors: \"Value must be > 0\" });\n    //   }\n    // }\n    validWeight(e.target.value);\n  };\n\n  const validItems = (index, name, value) => {\n    console.log(\"call\");\n    var valid = true;\n    if (!value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          valid = false;\n          return { ...error, [name]: \"Required\" };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    } else {\n      let newErr = errors.map((error, i) => {\n        if (index === i && name !== \"name\" && isNaN(value)) {\n          valid = false;\n          return { ...error, [name]: \"Value must be number\" };\n        }\n\n        if (index === i && name !== \"name\" && parseInt(value) <= 0) {\n          valid = false;\n          return { ...error, [name]: \"Value must > 0\" };\n        }\n\n        if (\n          index === i &&\n          name === \"stock\" &&\n          !Number.isInteger(parseFloat(value))\n        ) {\n          valid = false;\n          return { ...error, [name]: \"Stock must be Integer\" };\n        }\n\n        return error;\n      });\n\n      setErrors(newErr);\n      return valid;\n    }\n  };\n\n  const validName = (index, value) => {\n    var valid = true;\n    if (!value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          valid = false;\n          return { ...error, [\"name\"]: \"Required\" };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    }\n    return valid;\n  };\n\n  const validWeight = (value) => {\n    if (!value) {\n      setWeight({ ...weight, errors: \"Required\" });\n      return false;\n    }\n\n    if (isNaN(value)) {\n      setWeight({ ...weight, errors: \"Value must be number\" });\n      return false;\n    }\n\n    if (parseInt(value) <= 0) {\n      setWeight({ ...weight, errors: \"Value must be > 0\" });\n      return false;\n    }\n\n    return true;\n  };\n\n  const checkValue = () => {\n    //false: no error\n    //true: have error\n    let check = false;\n\n    if (!validWeight(weight.value)) {\n      check = true;\n    }\n\n    for (var i = 0; i < items.length; i++) {\n      //let error = { ...newErrors[i] };\n      if (!validItems(i, \"name\", items[i].name)) {\n        //error.name = \"Required\";\n        check = true;\n      }\n\n      if (items[i].value === \"\") {\n        //error.value = \"Required\";\n        check = true;\n      }\n      if (items[i].weight === \"\") {\n        //error.weight = \"Required\";\n        check = true;\n      }\n      if (items[i].stock === \"\" && type.value === \"2\") {\n        //error.stock = \"Required\";\n        check = true;\n      }\n      if (type.value !== \"2\") {\n        //error.stock = \"\";\n      }\n      //newErrors[i] = error;\n    }\n    // setErrors(newErrors);\n\n    return check;\n  };\n\n  const validCheckItems = () => {\n    items.forEach((item, index) => {\n      validItems(index, \"name\", item.name);\n      validItems(index, \"value\", item.value);\n    });\n  };\n\n  const onSubmit = () => {\n    // if (!checkType() && !checkValue()) {\n    //   greedy(items, parseInt(type.value), parseFloat(weight.value));\n    //   setIsGreedy(true);\n    // }\n    validCheckItems();\n  };\n\n  const clearItem = () => {\n    setItems([]);\n    setErrors([]);\n    setWeight({\n      value: \"\",\n      touched: false,\n      errors: \"\",\n    });\n    setType({ ...type, value: 0 });\n    setIsGreedy(false);\n    setFileName();\n    setFile(\"\");\n    setIsHaveFile(false);\n  };\n\n  const setItemsFile = (inputItems) => {\n    setItems(inputItems);\n    setErrors([]);\n\n    inputItems.forEach((item) => {\n      setErrors((prev) => [...prev, initItem]);\n      //setItems((prev) => [...prev, item]);\n    });\n  };\n\n  const setInputFile = (inputWeight, inputItems) => {\n    //clearItem();\n    setFile(\"\");\n    setIsGreedy(false);\n    inputWeight > 0 && setWeight({ ...weight, value: inputWeight, errors: \"\" });\n    setItemsFile(inputItems);\n    setIsHaveFile(true);\n  };\n\n  const onTypeChange = (e) => {\n    isGreedy && setIsGreedy(false);\n    setType({\n      value: e.target.value,\n      errors: \"\",\n    });\n  };\n\n  const checkType = () => {\n    //false no errors\n    //true have errors\n    if (type.value === 0) {\n      setType({ ...type, errors: \"Required\" });\n      return true;\n    }\n    return false;\n  };\n\n  const handleDeleteItem = (index) => {\n    const newItems = [...items];\n    newItems.splice(index, 1);\n    setItems(newItems);\n\n    const newErrors = [...errors];\n    newErrors.splice(index, 1);\n    setErrors(newErrors);\n  };\n\n  const totalValue = (items) => {\n    return items.reduce(\n      (totalWeight, item) => totalWeight + item.qty * item.value,\n      0\n    );\n  };\n\n  const totalWeight = (items) => {\n    return items.reduce(\n      (totalWeight, item) => totalWeight + item.qty * item.weight,\n      0\n    );\n  };\n\n  const notVisibleState = {\n    transform: \"translateX(-100%)\",\n    opacity: 0.1,\n  };\n\n  const leaveOut = {\n    transform: \"translateX(100%)\",\n    opacity: 0.1,\n  };\n\n  // const leaveState = {\n  //   opacity: 0,\n  // };\n\n  return (\n    <div>\n      <Forms>\n        <Row form>\n          <Col md={3} className=\"offset-md-2\">\n            <div className=\"sd-fade-left-right\">\n              <FormGroup>\n                <legend>Trọng Lượng</legend>\n                <Input\n                  style={{ width: \"100px\" }}\n                  type=\"number\"\n                  name=\"weight\"\n                  id=\"weight\"\n                  value={weight.value}\n                  onChange={handleWeightChange}\n                  onBlur={handleWeightBlur}\n                  className={weight.errors && \"is-invalid\"}\n                />\n                {weight.errors && (\n                  <span className=\"invalid-feedback\">{weight.errors}</span>\n                )}\n              </FormGroup>\n            </div>\n          </Col>\n          <Col md={3}>\n            <div className=\"sd-fade-left-right\">\n              <TypeBalo onTypeChange={onTypeChange} type={type} />\n            </div>\n          </Col>\n          <Col md={4}>\n            <div className=\"sd-fade-left-right\">\n              <InputFile\n                setFileName={setFileName}\n                fileNames={fileName}\n                items={items}\n                isGreedy={isGreedy}\n                setIsLoading={setIsLoading}\n                setInputFile={setInputFile}\n                file={file}\n                setFile={setFile}\n                inputWeight={weight.value}\n                type={type.value}\n                totalValue={totalValue}\n                totalWeight={totalWeight}\n                disabled={isHaveFile}\n              />\n            </div>\n          </Col>\n        </Row>\n        <ButtonControl\n          clearItem={clearItem}\n          addItem={addItem}\n          onSubmit={onSubmit}\n        />\n        <h2 className=\"text-center sd-fade-up-down\">Danh Sách Đồ Vật</h2>\n\n        <Table striped className=\"table-hover sd-fade-up-down sd-table\">\n          <thead>\n            <tr>\n              <th style={{ width: \"500px\" }}>Tên đồ vật</th>\n              <th>Giá trị</th>\n              <th>Trọng lượng</th>\n              <th>Số lượng hiện có</th>\n              <th>Số lượng lấy</th>\n              <th></th>\n            </tr>\n          </thead>\n          {/* <tbody> */}\n          <FlipMove\n            typeName=\"tbody\"\n            enterAnimation={{\n              from: notVisibleState,\n              to: {},\n            }}\n            leaveAnimation={{\n              from: {},\n              to: leaveOut,\n            }}\n          >\n            {items.length > 0 &&\n              !isLoading &&\n              items.map((item, index) => (\n                <tr key={index}>\n                  <td>\n                    <Input\n                      type=\"text\"\n                      id=\"name\"\n                      value={item.name ? item.name : null}\n                      name=\"name\"\n                      onChange={(e) => handleChange(e, index)}\n                      onBlur={handleBlur(index)}\n                      className={\n                        errors[index] && errors[index].name && \"is-invalid\"\n                      }\n                    ></Input>\n                    {errors[index].name && (\n                      <span className=\"invalid-feedback\">\n                        {errors[index].name}\n                      </span>\n                    )}\n                  </td>\n                  <td>\n                    <Input\n                      type=\"text\"\n                      value={item.value}\n                      name=\"value\"\n                      // type=\"number\"\n                      onChange={(e) => handleChange(e, index)}\n                      onBlur={handleBlur(index)}\n                      className={errors[index].value && \"is-invalid\"}\n                    ></Input>\n                    {errors[index].value && (\n                      <span className=\"invalid-feedback\">\n                        {errors[index].value}\n                      </span>\n                    )}\n                  </td>\n                  <td>\n                    <Input\n                      type=\"text\"\n                      value={item.weight}\n                      name=\"weight\"\n                      onChange={(e) => handleChange(e, index)}\n                      onBlur={handleBlur(index)}\n                      className={errors[index].weight && \"is-invalid\"}\n                    ></Input>\n                    {errors[index].weight && (\n                      <span className=\"invalid-feedback\">\n                        {errors[index].weight}\n                      </span>\n                    )}\n                  </td>\n                  <td>\n                    <Input\n                      type=\"text\"\n                      value={item.stock}\n                      name=\"stock\"\n                      onChange={(e) => handleChange(e, index)}\n                      onBlur={handleBlur(index)}\n                      className={errors[index].stock && \"is-invalid\"}\n                      disabled={type.value !== \"2\" ? true : false}\n                    ></Input>\n                    {errors[index].stock && (\n                      <span className=\"invalid-feedback\">\n                        {errors[index].stock}\n                      </span>\n                    )}\n                  </td>\n                  <td>\n                    <Input\n                      type=\"text\"\n                      disabled\n                      value={item.qty}\n                      name=\"qty\"\n                      onChange={(e) => handleChange(e, index)}\n                    ></Input>\n                  </td>\n                  <td>\n                    <FontAwesomeIcon\n                      icon=\"trash-alt\"\n                      className=\"icon-trash\"\n                      onClick={() => handleDeleteItem(index)}\n                    />\n                  </td>\n                </tr>\n              ))}\n            {isGreedy && (\n              <tr className=\"sd-total-row\">\n                <td className=\"sd-total-title\">Tổng cộng:</td>\n                <td>{totalValue(items)}</td>\n\n                <td>{totalWeight(items)}</td>\n              </tr>\n            )}\n          </FlipMove>\n          {/* </tbody> */}\n        </Table>\n      </Forms>\n    </div>\n  );\n}\n\nTableItem.propTypes = {};\n\nexport default TableItem;\n"]},"metadata":{},"sourceType":"module"}