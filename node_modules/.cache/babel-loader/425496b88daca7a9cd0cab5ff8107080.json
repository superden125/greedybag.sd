{"ast":null,"code":"import _defineProperty from\"/home/sd/HK1-2020-2021/NLCS/balo/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/sd/HK1-2020-2021/NLCS/balo/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/sd/HK1-2020-2021/NLCS/balo/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/sd/HK1-2020-2021/NLCS/balo/demo2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Button,Input,Table,Form as Forms,Label,FormGroup,Row,Col}from\"reactstrap\";import{greedy1,greedy2,greedy3}from\"../../greedy\";import InputFile from\"./InputFile\";import TypeBalo from\"./TypeBalo\";import ButtonControl from\"./ButtonControl\";function TableItem(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState({value:\"\",touched:false,errors:\"\"}),_useState4=_slicedToArray(_useState3,2),weight=_useState4[0],setWeight=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState({value:0,errors:\"\"}),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],setType=_useState8[1];var initItem={name:\"\",value:\"\",weight:\"\",stock:\"\",qty:\"\",time:\"\"};// useEffect(() => {\n//   console.log(items);\n// }, [items]);\nvar addItem=function addItem(){setItems([].concat(_toConsumableArray(items),[initItem]));setErrors([].concat(_toConsumableArray(errors),[initItem]));};var handleWeightChange=function handleWeightChange(e){setWeight(_objectSpread(_objectSpread({},weight),{},{value:e.target.value,errors:\"\"}));};var handleChange=function handleChange(e,index){var newArr=items.map(function(item,i){if(index===i){return _objectSpread(_objectSpread({},item),{},_defineProperty({},e.target.name,e.target.value));}else{return item;}});setItems(newArr);var newErr=errors.map(function(error,i){if(index===i){return _objectSpread(_objectSpread({},error),{},_defineProperty({},e.target.name,\"\"));}else{return error;}});setErrors(newErr);};var handleBlur=function handleBlur(index){return function(e){if(!e.target.value){var newErr=errors.map(function(error,i){if(index===i){return _objectSpread(_objectSpread({},error),{},_defineProperty({},e.target.name,\"Required\"));}else{return error;}});setErrors(newErr);}else{var _newErr=errors.map(function(error,i){if(index===i&&e.target.name!==\"name\"&&e.target.value%1!==0){return _objectSpread(_objectSpread({},error),{},_defineProperty({},e.target.name,\"Value must be number\"));}else{if(index===i&&e.target.name!==\"name\"&&parseInt(e.target.value)<=0){return _objectSpread(_objectSpread({},error),{},_defineProperty({},e.target.name,\"Value must > 0\"));}else{return error;}}});setErrors(_newErr);}};};var handleWeightBlur=function handleWeightBlur(e){setWeight(_objectSpread(_objectSpread({},weight),{},{touched:true}));if(!e.target.value){setWeight(_objectSpread(_objectSpread({},weight),{},{errors:\"Required\"}));}else{if(e.target.value%1!==0)setWeight(_objectSpread(_objectSpread({},weight),{},{errors:\"Value must be number\"}));else{if(parseInt(e.target.value)<=0)setWeight(_objectSpread(_objectSpread({},weight),{},{errors:\"Value must be > 0\"}));}}};var checkValue=function checkValue(){//false: no error\n//true: have error\nvar check=false;if(weight.value===\"\"){setWeight(_objectSpread(_objectSpread({},weight),{},{errors:\"Required\"}));check=true;}var newErrors=_toConsumableArray(errors);for(var i=0;i<items.length;i++){var error=_objectSpread({},newErrors[i]);if(items[i].name===\"\"){error.name=\"Required\";check=true;}if(items[i].value===\"\"){error.value=\"Required\";check=true;}if(items[i].weight===\"\"){error.weight=\"Required\";check=true;}if(items[i].stock===\"\"&&type.value===\"2\"){error.stock=\"Required\";check=true;}if(type.value!==\"2\"){error.stock=\"\";}newErrors[i]=error;}setErrors(newErrors);return check;};var onSubmit=function onSubmit(){if(!checkType()&&!checkValue()){console.log(type);switch(type.value){case\"1\":setItems(greedy1(items,parseInt(weight.value)));return;case\"2\":setItems(greedy2(items,parseInt(weight.value)));return;case\"3\":setItems(greedy3(items,parseInt(weight.value)));return;default:return;}}};var clearItem=function clearItem(){setItems([]);setErrors([]);setWeight({value:\"\",touched:false,errors:\"\"});setType(_objectSpread(_objectSpread({},type),{},{value:0}));};var setWeightFile=function setWeightFile(value){setWeight(_objectSpread(_objectSpread({},weight),{},{value:value,errors:\"\"}));};var setItemsFile=function setItemsFile(inputItems){setItems([]);inputItems.forEach(function(item){setErrors(function(prev){return[].concat(_toConsumableArray(prev),[initItem]);});setItems(function(prev){return[].concat(_toConsumableArray(prev),[item]);});});};var onTypeChange=function onTypeChange(e){setType({value:e.target.value,errors:\"\"});// let n = errors.length;\n// setErrors([]);\n// for (var i = 0; i < n; i++) {\n//   setErrors([...errors, initItem]);\n// }\n};var checkType=function checkType(){//false no errors\n//true have errors\nif(type.value===0){setType(_objectSpread(_objectSpread({},type),{},{errors:\"Required\"}));return true;}return false;};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Forms,null,/*#__PURE__*/React.createElement(Row,{form:true},/*#__PURE__*/React.createElement(Col,{md:3,className:\"offset-md-2\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"legend\",null,\"Weight\"),/*#__PURE__*/React.createElement(Input,{style:{width:\"100px\"},type:\"number\",name:\"weight\",id:\"weight\",value:weight.value,onChange:handleWeightChange,onBlur:handleWeightBlur,className:weight.errors&&\"is-invalid\"}),weight.errors&&/*#__PURE__*/React.createElement(\"span\",{className:\"invalid-feedback\"},weight.errors))),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(TypeBalo,{onTypeChange:onTypeChange,type:type})),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(InputFile,{setWeightFile:setWeightFile,setItemsFile:setItemsFile}))),/*#__PURE__*/React.createElement(ButtonControl,{clearItem:clearItem,addItem:addItem,onSubmit:onSubmit}),/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center\"},\"Table Items\"),/*#__PURE__*/React.createElement(Table,{striped:true,className:\"table-hover\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{width:\"500px\"}},\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Value\"),/*#__PURE__*/React.createElement(\"th\",null,\"Weight\"),/*#__PURE__*/React.createElement(\"th\",null,\"Stock\"),/*#__PURE__*/React.createElement(\"th\",null,\"Qty\"))),/*#__PURE__*/React.createElement(\"tbody\",null,items.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{type:\"text\",id:\"name\",value:item?item.name:null,name:\"name\",onChange:function onChange(e){return handleChange(e,index);},onBlur:handleBlur(index),className:errors[index]&&errors[index].name&&\"is-invalid\"}),errors[index].name&&/*#__PURE__*/React.createElement(\"span\",{className:\"invalid-feedback\"},errors[index].name)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{type:\"text\",value:item.value,name:\"value\"// type=\"number\"\n,onChange:function onChange(e){return handleChange(e,index);},onBlur:handleBlur(index),className:errors[index].value&&\"is-invalid\"}),errors[index].value&&/*#__PURE__*/React.createElement(\"span\",{className:\"invalid-feedback\"},errors[index].value)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{type:\"text\",value:item.weight,name:\"weight\",onChange:function onChange(e){return handleChange(e,index);},onBlur:handleBlur(index),className:errors[index].weight&&\"is-invalid\"}),errors[index].weight&&/*#__PURE__*/React.createElement(\"span\",{className:\"invalid-feedback\"},errors[index].weight)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{type:\"text\",value:item.stock,name:\"stock\",onChange:function onChange(e){return handleChange(e,index);},onBlur:handleBlur(index),className:errors[index].stock&&\"is-invalid\",disabled:type.value!==\"2\"?true:false}),errors[index].stock&&/*#__PURE__*/React.createElement(\"span\",{className:\"invalid-feedback\"},errors[index].stock)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Input,{type:\"text\",disabled:true,value:item.qty,name:\"qty\",onChange:function onChange(e){return handleChange(e,index);}})));})))));}export default TableItem;","map":{"version":3,"sources":["/home/sd/HK1-2020-2021/NLCS/balo/demo2/src/components/Items/TableItem.js"],"names":["React","useEffect","useState","Button","Input","Table","Form","Forms","Label","FormGroup","Row","Col","greedy1","greedy2","greedy3","InputFile","TypeBalo","ButtonControl","TableItem","props","items","setItems","value","touched","errors","weight","setWeight","setErrors","type","setType","initItem","name","stock","qty","time","addItem","handleWeightChange","e","target","handleChange","index","newArr","map","item","i","newErr","error","handleBlur","parseInt","handleWeightBlur","checkValue","check","newErrors","length","onSubmit","checkType","console","log","clearItem","setWeightFile","setItemsFile","inputItems","forEach","prev","onTypeChange","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Button,\n  Input,\n  Table,\n  Form as Forms,\n  Label,\n  FormGroup,\n  Row,\n  Col,\n} from \"reactstrap\";\n\nimport { greedy1, greedy2, greedy3 } from \"../../greedy\";\nimport InputFile from \"./InputFile\";\nimport TypeBalo from \"./TypeBalo\";\nimport ButtonControl from \"./ButtonControl\";\n\nfunction TableItem(props) {\n  const [items, setItems] = useState([]);\n  const [weight, setWeight] = useState({\n    value: \"\",\n    touched: false,\n    errors: \"\",\n  });\n  const [errors, setErrors] = useState([]);\n  const [type, setType] = useState({\n    value: 0,\n    errors: \"\",\n  });\n\n  const initItem = {\n    name: \"\",\n    value: \"\",\n    weight: \"\",\n    stock: \"\",\n    qty: \"\",\n    time: \"\",\n  };\n\n  // useEffect(() => {\n  //   console.log(items);\n  // }, [items]);\n\n  const addItem = () => {\n    setItems([...items, initItem]);\n    setErrors([...errors, initItem]);\n  };\n\n  const handleWeightChange = (e) => {\n    setWeight({ ...weight, value: e.target.value, errors: \"\" });\n  };\n\n  const handleChange = (e, index) => {\n    let newArr = items.map((item, i) => {\n      if (index === i) {\n        return { ...item, [e.target.name]: e.target.value };\n      } else {\n        return item;\n      }\n    });\n    setItems(newArr);\n\n    let newErr = errors.map((error, i) => {\n      if (index === i) {\n        return { ...error, [e.target.name]: \"\" };\n      } else {\n        return error;\n      }\n    });\n    setErrors(newErr);\n  };\n\n  const handleBlur = (index) => (e) => {\n    if (!e.target.value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          return { ...error, [e.target.name]: \"Required\" };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    } else {\n      let newErr = errors.map((error, i) => {\n        if (\n          index === i &&\n          e.target.name !== \"name\" &&\n          e.target.value % 1 !== 0\n        ) {\n          return { ...error, [e.target.name]: \"Value must be number\" };\n        } else {\n          if (\n            index === i &&\n            e.target.name !== \"name\" &&\n            parseInt(e.target.value) <= 0\n          ) {\n            return { ...error, [e.target.name]: \"Value must > 0\" };\n          } else {\n            return error;\n          }\n        }\n      });\n\n      setErrors(newErr);\n    }\n  };\n  const handleWeightBlur = (e) => {\n    setWeight({ ...weight, touched: true });\n    if (!e.target.value) {\n      setWeight({ ...weight, errors: \"Required\" });\n    } else {\n      if (e.target.value % 1 !== 0)\n        setWeight({ ...weight, errors: \"Value must be number\" });\n      else {\n        if (parseInt(e.target.value) <= 0)\n          setWeight({ ...weight, errors: \"Value must be > 0\" });\n      }\n    }\n  };\n\n  const checkValue = () => {\n    //false: no error\n    //true: have error\n    let check = false;\n    if (weight.value === \"\") {\n      setWeight({ ...weight, errors: \"Required\" });\n      check = true;\n    }\n    const newErrors = [...errors];\n\n    for (var i = 0; i < items.length; i++) {\n      let error = { ...newErrors[i] };\n      if (items[i].name === \"\") {\n        error.name = \"Required\";\n        check = true;\n      }\n      if (items[i].value === \"\") {\n        error.value = \"Required\";\n        check = true;\n      }\n      if (items[i].weight === \"\") {\n        error.weight = \"Required\";\n        check = true;\n      }\n      if (items[i].stock === \"\" && type.value === \"2\") {\n        error.stock = \"Required\";\n        check = true;\n      }\n      if (type.value !== \"2\") {\n        error.stock = \"\";\n      }\n      newErrors[i] = error;\n    }\n    setErrors(newErrors);\n    return check;\n  };\n\n  const onSubmit = () => {\n    if (!checkType() && !checkValue()) {\n      console.log(type);\n      switch (type.value) {\n        case \"1\":\n          setItems(greedy1(items, parseInt(weight.value)));\n          return;\n        case \"2\":\n          setItems(greedy2(items, parseInt(weight.value)));\n          return;\n        case \"3\":\n          setItems(greedy3(items, parseInt(weight.value)));\n          return;\n        default:\n          return;\n      }\n    }\n  };\n\n  const clearItem = () => {\n    setItems([]);\n    setErrors([]);\n    setWeight({\n      value: \"\",\n      touched: false,\n      errors: \"\",\n    });\n    setType({ ...type, value: 0 });\n  };\n\n  const setWeightFile = (value) => {\n    setWeight({ ...weight, value: value, errors: \"\" });\n  };\n\n  const setItemsFile = (inputItems) => {\n    setItems([]);\n    inputItems.forEach((item) => {\n      setErrors((prev) => [...prev, initItem]);\n      setItems((prev) => [...prev, item]);\n    });\n  };\n\n  const onTypeChange = (e) => {\n    setType({\n      value: e.target.value,\n      errors: \"\",\n    });\n    // let n = errors.length;\n    // setErrors([]);\n    // for (var i = 0; i < n; i++) {\n    //   setErrors([...errors, initItem]);\n    // }\n  };\n\n  const checkType = () => {\n    //false no errors\n    //true have errors\n    if (type.value === 0) {\n      setType({ ...type, errors: \"Required\" });\n      return true;\n    }\n    return false;\n  };\n\n  return (\n    <div>\n      <Forms>\n        <Row form>\n          <Col md={3} className=\"offset-md-2\">\n            <FormGroup>\n              <legend>Weight</legend>\n              <Input\n                style={{ width: \"100px\" }}\n                type=\"number\"\n                name=\"weight\"\n                id=\"weight\"\n                value={weight.value}\n                onChange={handleWeightChange}\n                onBlur={handleWeightBlur}\n                className={weight.errors && \"is-invalid\"}\n              />\n              {weight.errors && (\n                <span className=\"invalid-feedback\">{weight.errors}</span>\n              )}\n            </FormGroup>\n          </Col>\n          <Col md={3}>\n            <TypeBalo onTypeChange={onTypeChange} type={type} />\n          </Col>\n          <Col md={3}>\n            <InputFile\n              setWeightFile={setWeightFile}\n              setItemsFile={setItemsFile}\n            />\n          </Col>\n        </Row>\n        <ButtonControl\n          clearItem={clearItem}\n          addItem={addItem}\n          onSubmit={onSubmit}\n        />\n        <h2 className=\"text-center\">Table Items</h2>\n        <Table striped className=\"table-hover\">\n          <thead>\n            <tr>\n              <th style={{ width: \"500px\" }}>Name</th>\n              <th>Value</th>\n              <th>Weight</th>\n              <th>Stock</th>\n              <th>Qty</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => (\n              <tr key={index}>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"name\"\n                    value={item ? item.name : null}\n                    name=\"name\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={\n                      errors[index] && errors[index].name && \"is-invalid\"\n                    }\n                  ></Input>\n                  {errors[index].name && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].name}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.value}\n                    name=\"value\"\n                    // type=\"number\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].value && \"is-invalid\"}\n                  ></Input>\n                  {errors[index].value && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].value}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.weight}\n                    name=\"weight\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].weight && \"is-invalid\"}\n                  ></Input>\n                  {errors[index].weight && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].weight}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.stock}\n                    name=\"stock\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].stock && \"is-invalid\"}\n                    disabled={type.value !== \"2\" ? true : false}\n                  ></Input>\n                  {errors[index].stock && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].stock}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    disabled\n                    value={item.qty}\n                    name=\"qty\"\n                    onChange={(e) => handleChange(e, index)}\n                  ></Input>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </Forms>\n    </div>\n  );\n}\n\nTableItem.propTypes = {};\n\nexport default TableItem;\n"]},"metadata":{},"sourceType":"module"}