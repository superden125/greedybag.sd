{"ast":null,"code":"var _jsxFileName = \"/home/sd/HK1-2020-2021/NLCS/balo/demo2/src/components/Items/TableItem.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Input, Table, Form as Forms, Label, FormGroup, Row, Col } from \"reactstrap\";\nimport FlipMove from \"react-flip-move\";\nimport { greedy1, greedy2, greedy3 } from \"../../greedy\";\nimport InputFile from \"./InputFile\";\nimport TypeBalo from \"./TypeBalo\";\nimport ButtonControl from \"./ButtonControl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction TableItem(props) {\n  const [items, setItems] = useState([]);\n  const [weight, setWeight] = useState({\n    value: \"\",\n    touched: false,\n    errors: \"\"\n  });\n  const [errors, setErrors] = useState([]);\n  const [type, setType] = useState({\n    value: 0,\n    errors: \"\"\n  });\n  const [isGreedy, setIsGreedy] = useState(false);\n  const initItem = {\n    name: \"\",\n    value: \"\",\n    weight: \"\",\n    stock: \"\",\n    qty: \"\",\n    time: \"\"\n  };\n  useEffect(() => {\n    console.log(items);\n  }, [isGreedy]);\n\n  const addItem = () => {\n    setItems([...items, initItem]);\n    setErrors([...errors, initItem]);\n  };\n\n  const handleWeightChange = e => {\n    setWeight({ ...weight,\n      value: e.target.value,\n      errors: \"\"\n    });\n  };\n\n  const handleChange = (e, index) => {\n    let newArr = items.map((item, i) => {\n      if (index === i) {\n        return { ...item,\n          [e.target.name]: e.target.value\n        };\n      } else {\n        return item;\n      }\n    });\n    setItems(newArr);\n    let newErr = errors.map((error, i) => {\n      if (index === i) {\n        return { ...error,\n          [e.target.name]: \"\"\n        };\n      } else {\n        return error;\n      }\n    });\n    setErrors(newErr);\n  };\n\n  const handleBlur = index => e => {\n    if (!e.target.value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          return { ...error,\n            [e.target.name]: \"Required\"\n          };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    } else {\n      let newErr = errors.map((error, i) => {\n        if (index === i && e.target.name !== \"name\" && e.target.value % 1 !== 0) {\n          return { ...error,\n            [e.target.name]: \"Value must be number\"\n          };\n        } else {\n          if (index === i && e.target.name !== \"name\" && parseInt(e.target.value) <= 0) {\n            return { ...error,\n              [e.target.name]: \"Value must > 0\"\n            };\n          } else {\n            return error;\n          }\n        }\n      });\n      setErrors(newErr);\n    }\n  };\n\n  const handleWeightBlur = e => {\n    setWeight({ ...weight,\n      touched: true\n    });\n\n    if (!e.target.value) {\n      setWeight({ ...weight,\n        errors: \"Required\"\n      });\n    } else {\n      if (e.target.value % 1 !== 0) setWeight({ ...weight,\n        errors: \"Value must be number\"\n      });else {\n        if (parseInt(e.target.value) <= 0) setWeight({ ...weight,\n          errors: \"Value must be > 0\"\n        });\n      }\n    }\n  };\n\n  const checkValue = () => {\n    //false: no error\n    //true: have error\n    let check = false;\n\n    if (weight.value === \"\") {\n      setWeight({ ...weight,\n        errors: \"Required\"\n      });\n      check = true;\n    }\n\n    const newErrors = [...errors];\n\n    for (var i = 0; i < items.length; i++) {\n      let error = { ...newErrors[i]\n      };\n\n      if (items[i].name === \"\") {\n        error.name = \"Required\";\n        check = true;\n      }\n\n      if (items[i].value === \"\") {\n        error.value = \"Required\";\n        check = true;\n      }\n\n      if (items[i].weight === \"\") {\n        error.weight = \"Required\";\n        check = true;\n      }\n\n      if (items[i].stock === \"\" && type.value === \"2\") {\n        error.stock = \"Required\";\n        check = true;\n      }\n\n      if (type.value !== \"2\") {\n        error.stock = \"\";\n      }\n\n      newErrors[i] = error;\n    }\n\n    setErrors(newErrors);\n    return check;\n  };\n\n  const onSubmit = () => {\n    if (!checkType() && !checkValue()) {\n      switch (type.value) {\n        case \"1\":\n          setItems(greedy1(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n\n        case \"2\":\n          setItems(greedy2(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n\n        case \"3\":\n          setItems(greedy3(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n\n        default:\n          return;\n      }\n    }\n  };\n\n  const clearItem = () => {\n    setItems([]);\n    setErrors([]);\n    setWeight({\n      value: \"\",\n      touched: false,\n      errors: \"\"\n    });\n    setType({ ...type,\n      value: 0\n    });\n    setIsGreedy(false);\n  };\n\n  const setWeightFile = value => {\n    setWeight({ ...weight,\n      value: value,\n      errors: \"\"\n    });\n  };\n\n  const setItemsFile = inputItems => {\n    setItems([]);\n    inputItems.forEach(item => {\n      setErrors(prev => [...prev, initItem]);\n      setItems(prev => [...prev, item]);\n    });\n  };\n\n  const onTypeChange = e => {\n    setType({\n      value: e.target.value,\n      errors: \"\"\n    }); // let n = errors.length;\n    // setErrors([]);\n    // for (var i = 0; i < n; i++) {\n    //   setErrors([...errors, initItem]);\n    // }\n  };\n\n  const checkType = () => {\n    //false no errors\n    //true have errors\n    if (type.value === 0) {\n      setType({ ...type,\n        errors: \"Required\"\n      });\n      return true;\n    }\n\n    return false;\n  };\n\n  const handleDeleteItem = index => {\n    const newItems = [...items];\n    newItems.splice(index, 1);\n    setItems(newItems);\n    const newErrors = [...errors];\n    newErrors.splice(index, 1);\n    setErrors(newErrors);\n  };\n\n  const notVisibleState = {\n    transform: \"translateX(-100%)\",\n    opacity: 0.1\n  };\n  const leaveOut = {\n    transform: \"translateX(100%)\",\n    opacity: 0.1\n  };\n  const leaveState = {\n    opacity: 0\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Forms, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    form: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    className: \"offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, \"Weight\"), /*#__PURE__*/React.createElement(Input, {\n    style: {\n      width: \"100px\"\n    },\n    type: \"number\",\n    name: \"weight\",\n    id: \"weight\",\n    value: weight.value,\n    onChange: handleWeightChange,\n    onBlur: handleWeightBlur,\n    className: weight.errors && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }), weight.errors && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 19\n    }\n  }, weight.errors)))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TypeBalo, {\n    onTypeChange: onTypeChange,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sd-fade-left-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputFile, {\n    setWeightFile: setWeightFile,\n    setItemsFile: setItemsFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(ButtonControl, {\n    clearItem: clearItem,\n    addItem: addItem,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center sd-fade-up-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 9\n    }\n  }, \"Table Items\"), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    className: \"table-hover sd-fade-up-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"500px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, \"Value\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }, \"Weight\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 15\n    }\n  }, \"Stock\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(FlipMove, {\n    typeName: \"tbody\",\n    enterAnimation: {\n      from: notVisibleState,\n      to: {}\n    },\n    leaveAnimation: {\n      from: {},\n      to: leaveOut\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 11\n    }\n  }, items.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    id: \"name\",\n    value: item ? item.name : null,\n    name: \"name\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index] && errors[index].name && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 19\n    }\n  }), errors[index].name && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 21\n    }\n  }, errors[index].name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.value,\n    name: \"value\" // type=\"number\"\n    ,\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].value && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 19\n    }\n  }), errors[index].value && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 21\n    }\n  }, errors[index].value)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.weight,\n    name: \"weight\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].weight && \"is-invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 19\n    }\n  }), errors[index].weight && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 21\n    }\n  }, errors[index].weight)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    value: item.stock,\n    name: \"stock\",\n    onChange: e => handleChange(e, index),\n    onBlur: handleBlur(index),\n    className: errors[index].stock && \"is-invalid\",\n    disabled: type.value !== \"2\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 19\n    }\n  }), errors[index].stock && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 21\n    }\n  }, errors[index].stock)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    disabled: true,\n    value: item.qty,\n    name: \"qty\",\n    onChange: e => handleChange(e, index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"trash-alt\",\n    className: \"icon-trash\",\n    onClick: () => handleDeleteItem(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 19\n    }\n  })))), isGreedy && /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  }, \"Total Weight\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 17\n    }\n  }, items.reduce((totalWeight, item) => totalWeight + item.qty * item.weight, 0)))))));\n}\n\nTableItem.propTypes = {};\nexport default TableItem;","map":{"version":3,"sources":["/home/sd/HK1-2020-2021/NLCS/balo/demo2/src/components/Items/TableItem.js"],"names":["React","useEffect","useState","PropTypes","Button","Input","Table","Form","Forms","Label","FormGroup","Row","Col","FlipMove","greedy1","greedy2","greedy3","InputFile","TypeBalo","ButtonControl","FontAwesomeIcon","TableItem","props","items","setItems","weight","setWeight","value","touched","errors","setErrors","type","setType","isGreedy","setIsGreedy","initItem","name","stock","qty","time","console","log","addItem","handleWeightChange","e","target","handleChange","index","newArr","map","item","i","newErr","error","handleBlur","parseInt","handleWeightBlur","checkValue","check","newErrors","length","onSubmit","checkType","clearItem","setWeightFile","setItemsFile","inputItems","forEach","prev","onTypeChange","handleDeleteItem","newItems","splice","notVisibleState","transform","opacity","leaveOut","leaveState","width","from","to","reduce","totalWeight","propTypes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Button,\n  Input,\n  Table,\n  Form as Forms,\n  Label,\n  FormGroup,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport FlipMove from \"react-flip-move\";\n\nimport { greedy1, greedy2, greedy3 } from \"../../greedy\";\nimport InputFile from \"./InputFile\";\nimport TypeBalo from \"./TypeBalo\";\nimport ButtonControl from \"./ButtonControl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction TableItem(props) {\n  const [items, setItems] = useState([]);\n  const [weight, setWeight] = useState({\n    value: \"\",\n    touched: false,\n    errors: \"\",\n  });\n  const [errors, setErrors] = useState([]);\n  const [type, setType] = useState({\n    value: 0,\n    errors: \"\",\n  });\n\n  const [isGreedy, setIsGreedy] = useState(false);\n\n  const initItem = {\n    name: \"\",\n    value: \"\",\n    weight: \"\",\n    stock: \"\",\n    qty: \"\",\n    time: \"\",\n  };\n\n  useEffect(() => {\n    console.log(items);\n  }, [isGreedy]);\n\n  const addItem = () => {\n    setItems([...items, initItem]);\n    setErrors([...errors, initItem]);\n  };\n\n  const handleWeightChange = (e) => {\n    setWeight({ ...weight, value: e.target.value, errors: \"\" });\n  };\n\n  const handleChange = (e, index) => {\n    let newArr = items.map((item, i) => {\n      if (index === i) {\n        return { ...item, [e.target.name]: e.target.value };\n      } else {\n        return item;\n      }\n    });\n    setItems(newArr);\n\n    let newErr = errors.map((error, i) => {\n      if (index === i) {\n        return { ...error, [e.target.name]: \"\" };\n      } else {\n        return error;\n      }\n    });\n    setErrors(newErr);\n  };\n\n  const handleBlur = (index) => (e) => {\n    if (!e.target.value) {\n      let newErr = errors.map((error, i) => {\n        if (index === i) {\n          return { ...error, [e.target.name]: \"Required\" };\n        } else {\n          return error;\n        }\n      });\n      setErrors(newErr);\n    } else {\n      let newErr = errors.map((error, i) => {\n        if (\n          index === i &&\n          e.target.name !== \"name\" &&\n          e.target.value % 1 !== 0\n        ) {\n          return { ...error, [e.target.name]: \"Value must be number\" };\n        } else {\n          if (\n            index === i &&\n            e.target.name !== \"name\" &&\n            parseInt(e.target.value) <= 0\n          ) {\n            return { ...error, [e.target.name]: \"Value must > 0\" };\n          } else {\n            return error;\n          }\n        }\n      });\n\n      setErrors(newErr);\n    }\n  };\n  const handleWeightBlur = (e) => {\n    setWeight({ ...weight, touched: true });\n    if (!e.target.value) {\n      setWeight({ ...weight, errors: \"Required\" });\n    } else {\n      if (e.target.value % 1 !== 0)\n        setWeight({ ...weight, errors: \"Value must be number\" });\n      else {\n        if (parseInt(e.target.value) <= 0)\n          setWeight({ ...weight, errors: \"Value must be > 0\" });\n      }\n    }\n  };\n\n  const checkValue = () => {\n    //false: no error\n    //true: have error\n    let check = false;\n    if (weight.value === \"\") {\n      setWeight({ ...weight, errors: \"Required\" });\n      check = true;\n    }\n    const newErrors = [...errors];\n\n    for (var i = 0; i < items.length; i++) {\n      let error = { ...newErrors[i] };\n      if (items[i].name === \"\") {\n        error.name = \"Required\";\n        check = true;\n      }\n      if (items[i].value === \"\") {\n        error.value = \"Required\";\n        check = true;\n      }\n      if (items[i].weight === \"\") {\n        error.weight = \"Required\";\n        check = true;\n      }\n      if (items[i].stock === \"\" && type.value === \"2\") {\n        error.stock = \"Required\";\n        check = true;\n      }\n      if (type.value !== \"2\") {\n        error.stock = \"\";\n      }\n      newErrors[i] = error;\n    }\n    setErrors(newErrors);\n    return check;\n  };\n\n  const onSubmit = () => {\n    if (!checkType() && !checkValue()) {\n      switch (type.value) {\n        case \"1\":\n          setItems(greedy1(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n        case \"2\":\n          setItems(greedy2(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n        case \"3\":\n          setItems(greedy3(items, parseInt(weight.value)));\n          setIsGreedy(true);\n          return;\n        default:\n          return;\n      }\n    }\n  };\n\n  const clearItem = () => {\n    setItems([]);\n    setErrors([]);\n    setWeight({\n      value: \"\",\n      touched: false,\n      errors: \"\",\n    });\n    setType({ ...type, value: 0 });\n    setIsGreedy(false);\n  };\n\n  const setWeightFile = (value) => {\n    setWeight({ ...weight, value: value, errors: \"\" });\n  };\n\n  const setItemsFile = (inputItems) => {\n    setItems([]);\n    inputItems.forEach((item) => {\n      setErrors((prev) => [...prev, initItem]);\n      setItems((prev) => [...prev, item]);\n    });\n  };\n\n  const onTypeChange = (e) => {\n    setType({\n      value: e.target.value,\n      errors: \"\",\n    });\n    // let n = errors.length;\n    // setErrors([]);\n    // for (var i = 0; i < n; i++) {\n    //   setErrors([...errors, initItem]);\n    // }\n  };\n\n  const checkType = () => {\n    //false no errors\n    //true have errors\n    if (type.value === 0) {\n      setType({ ...type, errors: \"Required\" });\n      return true;\n    }\n    return false;\n  };\n\n  const handleDeleteItem = (index) => {\n    const newItems = [...items];\n    newItems.splice(index, 1);\n    setItems(newItems);\n\n    const newErrors = [...errors];\n    newErrors.splice(index, 1);\n    setErrors(newErrors);\n  };\n\n  const notVisibleState = {\n    transform: \"translateX(-100%)\",\n    opacity: 0.1,\n  };\n\n  const leaveOut = {\n    transform: \"translateX(100%)\",\n    opacity: 0.1,\n  };\n\n  const leaveState = {\n    opacity: 0,\n  };\n\n  return (\n    <div>\n      <Forms>\n        <Row form>\n          <Col md={3} className=\"offset-md-2\">\n            <div className=\"sd-fade-left-right\">\n              <FormGroup>\n                <legend>Weight</legend>\n                <Input\n                  style={{ width: \"100px\" }}\n                  type=\"number\"\n                  name=\"weight\"\n                  id=\"weight\"\n                  value={weight.value}\n                  onChange={handleWeightChange}\n                  onBlur={handleWeightBlur}\n                  className={weight.errors && \"is-invalid\"}\n                />\n                {weight.errors && (\n                  <span className=\"invalid-feedback\">{weight.errors}</span>\n                )}\n              </FormGroup>\n            </div>\n          </Col>\n          <Col md={3}>\n            <div className=\"sd-fade-left-right\">\n              <TypeBalo onTypeChange={onTypeChange} type={type} />\n            </div>\n          </Col>\n          <Col md={3}>\n            <div className=\"sd-fade-left-right\">\n              <InputFile\n                setWeightFile={setWeightFile}\n                setItemsFile={setItemsFile}\n              />\n            </div>\n          </Col>\n        </Row>\n        <ButtonControl\n          clearItem={clearItem}\n          addItem={addItem}\n          onSubmit={onSubmit}\n        />\n        <h2 className=\"text-center sd-fade-up-down\">Table Items</h2>\n\n        <Table striped className=\"table-hover sd-fade-up-down\">\n          <thead>\n            <tr>\n              <th style={{ width: \"500px\" }}>Name</th>\n              <th>Value</th>\n              <th>Weight</th>\n              <th>Stock</th>\n              <th>Qty</th>\n              <th></th>\n            </tr>\n          </thead>\n          {/* <tbody> */}\n          <FlipMove\n            typeName=\"tbody\"\n            enterAnimation={{\n              from: notVisibleState,\n              to: {},\n            }}\n            leaveAnimation={{\n              from: {},\n              to: leaveOut,\n            }}\n          >\n            {items.map((item, index) => (\n              <tr key={index}>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"name\"\n                    value={item ? item.name : null}\n                    name=\"name\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={\n                      errors[index] && errors[index].name && \"is-invalid\"\n                    }\n                  ></Input>\n                  {errors[index].name && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].name}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.value}\n                    name=\"value\"\n                    // type=\"number\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].value && \"is-invalid\"}\n                  ></Input>\n                  {errors[index].value && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].value}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.weight}\n                    name=\"weight\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].weight && \"is-invalid\"}\n                  ></Input>\n                  {errors[index].weight && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].weight}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    value={item.stock}\n                    name=\"stock\"\n                    onChange={(e) => handleChange(e, index)}\n                    onBlur={handleBlur(index)}\n                    className={errors[index].stock && \"is-invalid\"}\n                    disabled={type.value !== \"2\" ? true : false}\n                  ></Input>\n                  {errors[index].stock && (\n                    <span className=\"invalid-feedback\">\n                      {errors[index].stock}\n                    </span>\n                  )}\n                </td>\n                <td>\n                  <Input\n                    type=\"text\"\n                    disabled\n                    value={item.qty}\n                    name=\"qty\"\n                    onChange={(e) => handleChange(e, index)}\n                  ></Input>\n                </td>\n                <td>\n                  <FontAwesomeIcon\n                    icon=\"trash-alt\"\n                    className=\"icon-trash\"\n                    onClick={() => handleDeleteItem(index)}\n                  />\n                </td>\n              </tr>\n            ))}\n            {isGreedy && (\n              <tr>\n                <td>Total Weight</td>\n                <td>\n                  {items.reduce(\n                    (totalWeight, item) => totalWeight + item.qty * item.weight,\n                    0\n                  )}\n                </td>\n              </tr>\n            )}\n          </FlipMove>\n          {/* </tbody> */}\n        </Table>\n      </Forms>\n    </div>\n  );\n}\n\nTableItem.propTypes = {};\n\nexport default TableItem;\n"]},"metadata":{},"sourceType":"module"}